title: python 中 *args 和 **kwargs
date: 2013-02-24 12:56:35
tags: python
---

python 中的 *args 和 **kwargs 真是个神奇的东西，看了书研究了一下 python 的参数匹配模型，顺便记录下来，感觉自己记性总是不怎么好。

1. 位置：从做至右进行匹配
-------------------------

这种应该是最常见的一种了，看下面代码，一看便知了。

```
def foo(a, b, c):
    print(a, b, c)

foo(1, 2, 3) # (1, 2, 3)
```

2. 关键字参数：通过参数名进行匹配
---------------------------------

调用的函数可以定义哪一个函数参数接受这个值，好吧，还是看代码把。

```
def foo(a, b, c):
    print(a, b, c)

# 注意这里传递参数时的顺序可以与定义的顺序不一致
foo(b=1, a=2, c=3) # (2, 1, 3)
foo(1, c=2, b=3) # (1, 3, 2)
```

3. 默认参数：为没有传入值的参数定义参数值
-----------------------------------------

顾名思义，就是在定义函数时同时定义某个参数的默认值

```
def foo(a, b=1, c=4):
    print(a, b, c)

foo(1) # (1, 1, 4)
foo(1, c=2) # (1, 1, 2)
```

4. 可变参数：收集任意多关于位置或关键字的参数
---------------------------------------------

好吧，终于到了重点，写到这里感觉这篇文章根本不应该叫这个名字，哎，算了。

在函数头用 * 定义的参数是用来收集调用者传进来的参数的，还是看代码吧。

```
def foo(*args, **kwargs):
    print(args, kwargs)

foo(1, 2, a=3, b=4) # ((1, 2), {'a': 3, 'b': 4})
```

5. 可变参数解包：传递任意多的基于位置或关键字的参数
---------------------------------------------------

当在调用函数时用 * 时，这就意味着解包，就是把参数集合打散，然后传给函数。

```
def foo(a, b, c, d):
    print(a, b, c, d)

def bar(*args, **kwargs): # 这里的 * 是收集参数的
    print(args, kwargs)
    foo(*args, **kwargs) # 当在调用函数时用 * 时，则用来解包的

bar(1, 2, c=3, d=4)
# ((1, 2), {'c': 3, 'd': 4})
# (1, 2, 3, 4)
```

最后看一个混合的

```
def foo(a, b, c, d, e=4):
    print(a, b, c, d, e)

p1 = [1, 2]
p2 = {'d': 3}

foo(0, *p1, d=3) # (0, 1, 2, 3, 4)
foo(0, *p1, **p2) # (0, 1, 2, 3, 4)

def bar(a, *args, **kwargs):
    print(a, args, kwargs)

bar(1, 2, 3, b=4, c=5) # (1, (2, 3), {'c': 5, 'b': 4})
```