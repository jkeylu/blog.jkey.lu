<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>pep 8 | jKey Blog</title>
  <meta name="author" content="jKey Lu">
  
  <meta name="description" content="简介
这篇是讲关于 python 代码风格的一些约定，主要用于 python 中标准库的代码风格的约定。关于 pep 8 这份文档网上也有很多翻译，但是为了自己便于记忆，大致的翻译记录一下。所以，对照原文可能是不完整的。
A Foolish Consistency is the Hobgoblin of Little Minds
总之一句话，就是保持代码的一致性。
代码排版
缩进

每级缩进使用 4 个空格。

如果和旧代码不一致，还是改为与旧代码相同的缩减方式。">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="pep 8"/>
  <meta property="og:site_name" content="jKey Blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="jKey Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-16294460-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">jKey Blog</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-04-21T07:32:09.000Z"><a href="/2013/04/21/pep-8/">4月 21, 2013</a></time>
      
      
  
    <h1 class="title">pep 8</h1>
  

    </header>
    <div class="entry">
      
        <h1>简介</h1>
<p>这篇是讲关于 python 代码风格的一些约定，主要用于 python 中标准库的代码风格的约定。关于 <a href="http://www.python.org/dev/peps/pep-0008/" target="_blank">pep 8</a> 这份文档网上也有很多翻译，但是为了自己便于记忆，大致的翻译记录一下。所以，对照原文可能是不完整的。</p>
<h1>A Foolish Consistency is the Hobgoblin of Little Minds</h1>
<p>总之一句话，就是保持代码的一致性。</p>
<h1>代码排版</h1>
<h2>缩进</h2>
<ul>
<li><p>每级缩进使用 4 个空格。</p>
</li>
<li><p>如果和旧代码不一致，还是改为与旧代码相同的缩减方式。</p>
</li>
</ul>
<a id="more"></a>

<p>Yes:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="comment"># Aligned with opening delimiter</span>
foo = long_function_name(var_one, var_two,
                         var_three, var_four)

<span class="comment"># More indentation included to distinguish this from the rest.</span>
<span class="function"><span class="keyword">def</span> <span class="title">long_function_name</span><span class="params">(
        var_one, var_two, var_three,
        var_four)</span>:</span>
    print(var_one)
</pre></td></tr></table></figure>

<p>No:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="comment"># Arguments on first line forbidden when not using vertical alignment</span>
foo = long_function_name(var_one, var_two,
    var_three, var_four)

<span class="comment"># Further indentation required as indentation is not distinguishable</span>
<span class="function"><span class="keyword">def</span> <span class="title">long_function_name</span><span class="params">(
    var_one, var_two, var_three,
    var_four)</span>:</span>
    print(var_one)
</pre></td></tr></table></figure>

<p>Optional:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="comment"># Extra indentation is not necessary.</span>
<span class="title">foo</span> = long_function_name(
  var_one, var_two,
  var_three, var_four)
</pre></td></tr></table></figure>

<h2>制表符还是空格？</h2>
<ul>
<li><p>永远不要混着一起用。</p>
</li>
<li><p>建议使用空格。在调用 python 命令行解释器时可以使用 -t 或 -tt 选项来检查代码中是否混用制表符和空格，前者发出警告，后者发出错误。</p>
</li>
</ul>
<h2>每行最大长度</h2>
<ul>
<li><p>限制所有行最大字符数不超过 79 个字符。</p>
</li>
<li><p>文档或注释的话推荐将长度限制在 72 个字符。</p>
</li>
<li><p>可以使用圆括号、方括号和大括号来指示连续的行。可以用圆括号把原来一句很长的表达式分割为多行。</p>
</li>
</ul>
<p>Some examples:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span>(<span class="title">Blob</span>):

    <span class="title">def</span> <span class="title">__init__</span>(<span class="title">self</span>, <span class="title">width</span>, <span class="title">height</span>,
                 <span class="title">color</span>='<span class="title">black</span>', <span class="title">emphasis</span>=<span class="title">None</span>, <span class="title">highlight</span>=0):
        <span class="title">if</span> (<span class="title">width</span> == 0 <span class="title">and</span> <span class="title">height</span> == 0 <span class="title">and</span>
            <span class="title">color</span> == '<span class="title">red</span>' <span class="title">and</span> <span class="title">emphasis</span> == '<span class="title">strong</span>' <span class="title">or</span>
            <span class="title">highlight</span> &gt; 100):
            <span class="title">raise</span> <span class="title">ValueError</span>("<span class="title">sorry</span>, <span class="title">you</span> <span class="title">lose</span>")
        <span class="title">if</span> <span class="title">width</span> == 0 <span class="title">and</span> <span class="title">height</span> == 0 <span class="title">and</span> (<span class="title">color</span> == '<span class="title">red</span>' <span class="title">or</span>
                                           <span class="title">emphasis</span> <span class="title">is</span> <span class="title">None</span>):
            <span class="title">raise</span> <span class="title">ValueError</span>("<span class="title">I</span> <span class="title">don</span>'<span class="title">t</span> <span class="title">think</span> <span class="title">so</span> -- <span class="title">values</span> <span class="title">are</span> %<span class="title">s</span>, %<span class="title">s</span>" %
                             (<span class="title">width</span>, <span class="title">height</span>))
        <span class="title">Blob</span>.<span class="title">__init__</span>(<span class="title">self</span>, <span class="title">width</span>, <span class="title">height</span>,
                      <span class="title">color</span>, <span class="title">emphasis</span>, <span class="title">highlight</span>)
</pre></td></tr></table></figure>

<h2>空行</h2>
<ul>
<li><p>顶级函数和类定义用两行空行分割。</p>
</li>
<li><p>类中的方法定义用一行空行分割。</p>
</li>
<li><p>可以用额外的空行分割一组相关的函数。</p>
</li>
</ul>
<h2>编码 (<a href="http://www.python.org/dev/peps/pep-0263" target="_blank">PEP 263</a>)</h2>
<p>python 核心代码应该使用 ASCII 或 Latin-1 编码。python 3.0 以上使用 UTF-8，更多请看 <a href="http://www.python.org/dev/peps/pep-3120" target="_blank">PEP 3120</a></p>
<h2>导入</h2>
<ul>
<li>通常在单独的行导入</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>    <span class="type">Yes</span>: <span class="import"><span class="keyword">import</span> os</span>
         <span class="import"><span class="keyword">import</span> sys</span>

    <span class="type">No</span>:  <span class="import"><span class="keyword">import</span> sys, os</span>
</pre></td></tr></table></figure>

<ul>
<li>以下请看是没问题的：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>    from subprocess <span class="import"><span class="keyword">import</span> Popen, PIPE</span>
</pre></td></tr></table></figure>

<ul>
<li><p>导入通常被放在文件的顶部，在模块注释和文档字符串之后，在模块的全局变量和常量之前。</p>
<p>  导入应该按照下面顺序分组排放：</p>
<pre><code>  1. 标准库的导入
  2. 相关的第三方包的导入
  3. 本地应用/库的特定导入</code></pre>
<p>  并且用一行空行分隔每个分组。</p>
<p>  把任何相关 __all__ 说明的放在导入之后。</p>
</li>
<li><p>对于所有导入都是用据对路径。</p>
</li>
<li><p>从一个包含类的模块中导入类时，通常可以写成这样：</p>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>    from my<span class="class"><span class="keyword">class</span> <span class="title">import</span> <span class="title">MyClass</span></span>
    from foo.bar.your<span class="class"><span class="keyword">class</span> <span class="title">import</span> <span class="title">YourClass</span></span>
</pre></td></tr></table></figure>

<pre><code>如果这样写导致了本地名字冲突，那么就这样写：</code></pre>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>    <span class="import"><span class="keyword">import</span> myclass</span>
    <span class="import"><span class="keyword">import</span> foo.bar.yourclass</span>
</pre></td></tr></table></figure>

<pre><code>并且使用 &quot;myclass.MyClass&quot; 和 &quot;foo.bar.yourclass.YourClass&quot;.</code></pre>
<h1>表达式和语句中的空格</h1>
<h2>不能忍受的事</h2>
<p><strong>避免</strong>在下述情况中使用无关的空格：</p>
<ul>
<li>紧挨着圆括号，方括号或大括号里空格</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>    <span class="tag">Yes</span>: <span class="tag">spam</span>(<span class="tag">ham</span><span class="attr_selector">[1]</span>, <span class="rules">{<span class="rule"><span class="attribute">eggs</span>:<span class="value"> <span class="number">2</span>}</span></span></span>)
    <span class="tag">No</span>:  <span class="tag">spam</span>( <span class="tag">ham</span><span class="attr_selector">[ 1 ]</span>, <span class="rules">{ <span class="rule"><span class="attribute">eggs</span>:<span class="value"> <span class="number">2</span> }</span></span></span> )
</pre></td></tr></table></figure>

<ul>
<li>在逗号，分号或冒号前有空格</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>    Yes: <span class="keyword">if</span> x == <span class="number">4</span>: <span class="built_in">print</span> x, y; x, y = y, x
    No:  <span class="keyword">if</span> x == <span class="number">4</span> : <span class="built_in">print</span> x , y ; x , y = y , x
</pre></td></tr></table></figure>

<ul>
<li>在函数调用的左括号前有空格</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>    <span class="attribute">Yes</span>: <span class="string">spam(1)</span>
    <span class="attribute">No</span>: <span class="string"> spam (1)</span>
</pre></td></tr></table></figure>

<ul>
<li>在索引的多括号前有空格</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>    <span class="attribute">Yes</span>: <span class="string">dict['key'] = list[index]</span>
    <span class="attribute">No</span>: <span class="string"> dict ['key'] = list [index]</span>
</pre></td></tr></table></figure>

<ul>
<li><p>在等号前加多余的空格</p>
<p>  Yes:</p>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>    <span class="title">x</span> = <span class="number">1</span>
    y = <span class="number">2</span>
    long_variable = <span class="number">3</span>
</pre></td></tr></table></figure>

<pre><code><span class="attribute">No:</code></pre>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>    <span class="title">x</span>             = <span class="number">1</span>
    y             = <span class="number">2</span>
    long_variable = <span class="number">3</span>
</pre></td></tr></table></figure>

<h2>其他推荐</h2>
<h1>注释</h1>
<h2>Block Comments</h2>
<h2>Inline Comments</h2>
<h2>Documentation Strings</h2>
<h1>Version Bookkeeping</h1>
<h1>Naming Conventions</h1>
<h2>Descriptive: Naming Styles</h2>
<h2>Prescriptive: Naming Conventions</h2>
<h3>Names to Avoid</h3>
<h3>Package and Module Names</h3>
<h3>Class Names</h3>
<h3>Exception Names</h3>
<h3>Global Variable Names</h3>
<h3>Function Names</h3>
<h3>Function and method arguments</h3>
<h3>Method Names and Instance Variables</h3>
<h3>Constants</h3>
<h3>Designing for inheritance</h3>
<h1>Programming Recommendations</h1>

      
    </div>
    <footer>
      
        
        
  
  <div class="tags">
    <a href="/tags/python/">python</a>
  </div>

        


      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">留言</h1>
  <div class="ds-thread">
    <noscript>Please enable JavaScript to view the comments powered by DuoShuo.</noscript>
  </div>
</section>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:blog.jkey.lu">
  </form>
</div>

  

  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/backbone/">backbone</a><small>1</small></li>
  
    <li><a href="/tags/nodejs/">nodejs</a><small>1</small></li>
  
    <li><a href="/tags/openwrt/">openwrt</a><small>1</small></li>
  
    <li><a href="/tags/python/">python</a><small>4</small></li>
  
    <li><a href="/tags/socket/">socket</a><small>1</small></li>
  
    <li><a href="/tags/tornado/">tornado</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2013 jKey Lu
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var duoshuoQuery = {short_name:"blogjkeylu"};

(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = 'http://static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
  || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>